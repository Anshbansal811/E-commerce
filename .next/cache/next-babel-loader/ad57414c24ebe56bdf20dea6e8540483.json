{"ast":null,"code":"import initDB from '../../helpers/initDB';\nimport Product from '../../models/Product';\ninitDB();\nexport default (async (req, res) => {\n  switch (req.method) {\n    case \"GET\":\n      await getallProducts(req, res);\n      break;\n\n    case \"POST\":\n      await saveProduct(req, res);\n      break;\n  }\n});\n\nconst getallProducts = async (req, res) => {\n  try {\n    const products = await Product.find();\n    res.status(200).json(products);\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nconst saveProduct = async (req, res) => {\n  const {\n    name,\n    price,\n    description,\n    mediaUrl\n  } = req.body;\n\n  try {\n    if (!name || !price || !description || !mediaUrl) {\n      return res.status(422).json({\n        error: \"Please add all the fields\"\n      });\n    }\n\n    const product = await new Product({\n      name,\n      price,\n      description,\n      mediaUrl\n    }).save();\n    res.status(201).json(product);\n  } catch (err) {\n    res.status(500).json({\n      error: \"internal server error\"\n    });\n    console.log(err);\n  }\n};","map":{"version":3,"sources":["D:/Web/E-commerce/pages/api/products.js"],"names":["initDB","Product","req","res","method","getallProducts","saveProduct","products","find","status","json","err","console","log","name","price","description","mediaUrl","body","error","product","save"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,sBAAnB;AACA,OAAOC,OAAP,MAAoB,sBAApB;AAEAD,MAAM;AAEN,gBAAe,OAAOE,GAAP,EAAWC,GAAX,KAAiB;AAC9B,UAAQD,GAAG,CAACE,MAAZ;AAEK,SAAK,KAAL;AACE,YAAMC,cAAc,CAACH,GAAD,EAAKC,GAAL,CAApB;AACA;;AACF,SAAK,MAAL;AACE,YAAMG,WAAW,CAACJ,GAAD,EAAKC,GAAL,CAAjB;AACA;AAPP;AASD,CAVD;;AAaA,MAAME,cAAc,GAAG,OAAOH,GAAP,EAAWC,GAAX,KAAiB;AACtC,MAAG;AACD,UAAMI,QAAQ,GAAI,MAAMN,OAAO,CAACO,IAAR,EAAxB;AACAL,IAAAA,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBH,QAArB;AACD,GAHD,CAGC,OAAMI,GAAN,EAAU;AACTC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD;AAEF,CARD;;AAWA,MAAML,WAAW,GAAG,OAAOJ,GAAP,EAAWC,GAAX,KAAiB;AAEnC,QAAM;AAACW,IAAAA,IAAD;AAAMC,IAAAA,KAAN;AAAYC,IAAAA,WAAZ;AAAwBC,IAAAA;AAAxB,MAAqCf,GAAG,CAACgB,IAA/C;;AACA,MAAG;AACC,QAAG,CAACJ,IAAD,IAAS,CAACC,KAAV,IAAmB,CAACC,WAApB,IAAmC,CAACC,QAAvC,EAAgD;AAClD,aAAOd,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACS,QAAAA,KAAK,EAAC;AAAP,OAArB,CAAP;AACD;;AACA,UAAMC,OAAO,GAAG,MAAM,IAAInB,OAAJ,CAAY;AAChCa,MAAAA,IADgC;AAEhCC,MAAAA,KAFgC;AAGhCC,MAAAA,WAHgC;AAIhCC,MAAAA;AAJgC,KAAZ,EAKnBI,IALmB,EAAtB;AAMAlB,IAAAA,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBU,OAArB;AACA,GAXD,CAWC,OAAMT,GAAN,EAAU;AACTR,IAAAA,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACS,MAAAA,KAAK,EAAC;AAAP,KAArB;AACAP,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD;AAGF,CApBD","sourcesContent":["import initDB from '../../helpers/initDB'\r\nimport Product from '../../models/Product'\r\n\r\ninitDB()\r\n\r\nexport default async (req,res)=>{\r\n  switch (req.method)\r\n    {\r\n       case \"GET\":\r\n         await getallProducts(req,res)\r\n         break\r\n       case \"POST\":\r\n         await saveProduct(req,res)   \r\n         break\r\n    }  \r\n}\r\n\r\n\r\nconst getallProducts = async (req,res)=>{\r\n  try{\r\n    const products =  await Product.find()\r\n    res.status(200).json(products)\r\n  }catch(err){\r\n    console.log(err)\r\n  }\r\n  \r\n}\r\n\r\n\r\nconst saveProduct = async (req,res)=>{\r\n \r\n  const {name,price,description,mediaUrl} =  req.body\r\n  try{\r\n      if(!name || !price || !description || !mediaUrl){\r\n    return res.status(422).json({error:\"Please add all the fields\"})\r\n  }\r\n   const product = await new Product({\r\n     name,\r\n     price,\r\n     description,\r\n     mediaUrl\r\n   }).save()\r\n   res.status(201).json(product)\r\n  }catch(err){\r\n    res.status(500).json({error:\"internal server error\"})\r\n    console.log(err)\r\n  }\r\n\r\n\r\n}"]},"metadata":{},"sourceType":"module"}
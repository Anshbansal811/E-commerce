{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\Web\\\\E-commerce\\\\pages\\\\login.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Link from 'next/link';\nimport { useState } from 'react';\nimport baseUrl from '../helpers/baseUrl';\nimport cookie from 'js-cookie';\nimport { useRouter } from 'next/router';\n\nvar Login = function Login() {\n  _s();\n\n  var _useState = useState(\"\"),\n      email = _useState[0],\n      setEmail = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      password = _useState2[0],\n      setPassword = _useState2[1];\n\n  var router = useRouter();\n\n  var userLogin = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var res, res2;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              _context.next = 3;\n              return fetch(\"\".concat(baseUrl, \"/api/login\"), {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                  email: email,\n                  password: password\n                })\n              });\n\n            case 3:\n              res = _context.sent;\n              _context.next = 6;\n              return res.json();\n\n            case 6:\n              res2 = _context.sent;\n\n              if (res2.error) {\n                M.toast({\n                  html: res2.error,\n                  classes: \"red\"\n                });\n              } else {\n                console.log(res2);\n                cookie.set('token', res2.token);\n                cookie.set('user', res2.user);\n                router.push('/account');\n              }\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function userLogin(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(\"div\", {\n    className: \"container card authcard center-align\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }\n  }, __jsx(\"h3\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 9\n    }\n  }, \"LOGIN\"), __jsx(\"form\", {\n    onSubmit: function onSubmit(e) {\n      return userLogin(e);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }\n  }, __jsx(\"input\", {\n    type: \"email\",\n    placeholder: \"Email\",\n    value: email,\n    onChange: function onChange(e) {\n      return setEmail(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 12\n    }\n  }), __jsx(\"input\", {\n    type: \"password\",\n    placeholder: \"Password\",\n    value: password,\n    onChange: function onChange(e) {\n      return setPassword(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }\n  }), __jsx(\"button\", {\n    className: \"btn waves-effect waves-light #1565c0 blue darken-3\",\n    type: \"submit\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 15\n    }\n  }, \"login\", __jsx(\"i\", {\n    className: \"material-icons right\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 17\n    }\n  }, \"forward\")), __jsx(Link, {\n    href: \"/signup\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }\n  }, __jsx(\"a\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 34\n    }\n  }, __jsx(\"h5\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 37\n    }\n  }, \"Dont have a account ?\")))));\n};\n\n_s(Login, \"mRnagQBsktVew/ifDow5oEBWEco=\", false, function () {\n  return [useRouter];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["D:/Web/E-commerce/pages/login.js"],"names":["Link","useState","baseUrl","cookie","useRouter","Login","email","setEmail","password","setPassword","router","userLogin","e","preventDefault","fetch","method","headers","body","JSON","stringify","res","json","res2","error","M","toast","html","classes","console","log","set","token","user","push","target","value"],"mappings":"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","sourcesContent":["import Link from 'next/link'\r\nimport {useState} from 'react'\r\nimport baseUrl from '../helpers/baseUrl'\r\nimport cookie from 'js-cookie'\r\nimport {useRouter} from 'next/router'\r\nconst Login = ()=>{\r\n  const [email,setEmail] = useState(\"\")\r\n  const [password,setPassword] = useState(\"\")\r\n   const router  = useRouter()\r\n  const userLogin = async (e)=>{\r\n    e.preventDefault()\r\n    const res =  await fetch(`${baseUrl}/api/login`,{\r\n      method:\"POST\",\r\n      headers:{\r\n        \"Content-Type\":\"application/json\"\r\n      },\r\n      body:JSON.stringify({\r\n        email,\r\n        password\r\n      })\r\n    })\r\n\r\n    const res2 = await res.json()\r\n    if(res2.error){\r\n      M.toast({html: res2.error,classes:\"red\"})\r\n    }else{\r\n       console.log(res2)\r\n       cookie.set('token',res2.token)\r\n       cookie.set('user',res2.user)\r\n       router.push('/account')\r\n    }\r\n\r\n  }\r\n    return(\r\n      <div className=\"container card authcard center-align\">\r\n        <h3>LOGIN</h3>\r\n        <form onSubmit={(e)=>userLogin(e)}>\r\n           <input type=\"email\" placeholder=\"Email\"\r\n            value={email}\r\n            onChange={(e)=>setEmail(e.target.value)}\r\n            />\r\n            <input type=\"password\" placeholder=\"Password\"\r\n            value={password}\r\n            onChange={(e)=>setPassword(e.target.value)}\r\n            />\r\n              <button className=\"btn waves-effect waves-light #1565c0 blue darken-3\" type=\"submit\">login\r\n                <i className=\"material-icons right\">forward</i>\r\n            </button>\r\n            <Link href=\"/signup\"><a><h5>Dont have a account ?</h5></a></Link>\r\n        </form>\r\n       \r\n      </div>\r\n    )\r\n  }\r\n  \r\n  export default Login"]},"metadata":{},"sourceType":"module"}